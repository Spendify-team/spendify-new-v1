<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="theme-color" content="#000000"/>
    <!-- Primary Meta Tags -->
    <title>Spendify</title>
    <meta name="title" content="Home | Spendify"/>
    <meta name="description" content="Chat with your spendify buddy"/>
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json"/>
    <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
            integrity="sha256-YvdLHPgkqJ8DVUxjjnGVlMMJtNimJ6dYkowFFvp4kKs="
            crossorigin="anonymous"
    />
    <style>
        html {
            margin: 0;
            padding: 0;
        }

        .floating-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: #fff;
            color: black;
            border: none;
            outline: none;
            cursor: move;
            z-index: 9999;
            box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.15);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .floating-button i {
            font-size: 24px;
        }
    </style>
    <script src="https://kit.fontawesome.com/3d7f43cf01.js" crossorigin="anonymous"></script>
    <script
            async
            src="https://js.stripe.com/v3/buy-button.js">
    </script>
</head>
<body>
<noscript>You need to enable JavaScript to run this app.</noscript>
<button class="floating-button" onclick="translateUrl()" draggable="true">
    <i class="fab fa-canadian-maple-leaf" style="color:red;"></i>
</button>

<div id="root"></div>
<script>
    function translateUrl() {
        // Check if the URL is already translated
        const isTranslated = localStorage.getItem('isTranslated') === 'true';

        // Translation parameters
        let translationParams = {
            _x_tr_sl: "auto",  // Source language (auto-detect)
            _x_tr_tl: "en",    // Target language (English)
            _x_tr_hl: "en",    // UI language (English)
            _x_tr_pto: "wapp"  // Translation mode (web app)
        };

        // Build the original and translated URLs
        let originalUrl = window.location.href;
        let translatedUrl = originalUrl;

        // Toggle translation state
        if (isTranslated) {
            // Remove the translation part from the URL
            const googleAddOn = ".translate.goog/?";
            const translatedUrlIndex = translatedUrl.indexOf(googleAddOn);
            if (translatedUrlIndex !== -1) {
                translatedUrl = translatedUrl.slice(0, translatedUrlIndex);
            }
            localStorage.setItem('isTranslated', 'false');
        } else {
            // Append translation parameters to the URL
            let translatedParams = "";
            Object.keys(translationParams).forEach(function (key) {
                translatedParams += encodeURIComponent(key) + "=" + encodeURIComponent(translationParams[key]) + "&";
            });
            const googleAddOn = ".translate.goog/?";
            translatedUrl = translatedUrl.replace(/#.*$/, ''); // Remove hash
            translatedUrl += googleAddOn + translatedParams;
            localStorage.setItem('isTranslated', 'true');
        }

        // Redirect to the translated or original URL
        if (translatedUrl !== originalUrl) {
            window.location.href = translatedUrl;
        }
    }

</script>
</body>
</html>
